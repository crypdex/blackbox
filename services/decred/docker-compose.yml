version: '3.7'

# Since these services use certs to validate connections,
# user/pass combinations *should be* optional

# DECRED_DATA_DIR (autogenerated)
# DECRED_RPCUSER
# DECRED_RPCPASSWORD
# DECRED_WALLET_PASSWORD

services:
  decred:
    build: .

  dcrd:
    image: crypdex/decred:1.4
    restart: on-failure
    ports:
      - 9108:9108
      - 9109:9109
      - 19108:19108
      - 19109:19109
      - 18555:18555
    volumes:
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrctl:/home/decred/.dcrctl
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrd:/home/decred/.dcrd
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrwallet:/home/decred/.dcrwallet
    command: dcrd

  dcrwallet:
    image: crypdex/decred:1.4
    restart: on-failure
    ports:
      - 9110:9110
      - 9111:9111
      - 19110:19110
      - 19111:19111
      - 19557:19557
      - 19558:19558
    volumes:
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrctl:/home/decred/.dcrctl
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrd:/home/decred/.dcrd
      - ${DECRED_DATA_DIR:?DECRED_DATA_DIR required}/dcrwallet:/home/decred/.dcrwallet
    command: dcrwallet

